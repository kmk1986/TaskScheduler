describe("Task with String Adapater",function(){var a;var b;TaskSchedulerUtil.getCurrentDate=function(){return new Date(2012,4,25,18,0,0,0)};beforeEach(function(){a=new TaskScheduler("test");b=0});describe("Testing 'before' ",function(){it("should run the defined task; setting the date 5/26/2012",function(){a.run(function(c){b=c}).before(new TaskDateAdapter.String("5/26/2012"));expect(b).toEqual(1)});it("should not run the defined task; setting the date 5/25/2012",function(){a.run(function(c){b=c}).before(new TaskDateAdapter.String("5/25/2012"));expect(b).toEqual(0)});it("should run the defined task; setting the date 5/25/2012 6:1pm ",function(){a.run(function(c){b=c}).before(new TaskDateAdapter.String("5/25/2012 6:1pm"));expect(b).toEqual(1)})});describe("Testing 'after' ",function(){it("Run a task after 5/25/2012 5:59pm",function(){a.run(function(c){b=c}).after(new TaskDateAdapter.String("5/25/2012 5:59pm"));expect(b).toEqual(1)});it("should not run the defined task; setting the date 5/26/2012",function(){a.run(function(c){b=c}).after(new TaskDateAdapter.String("05/26/2012"));expect(b).toEqual(0)})});describe("Testing 'on' method ",function(){it("Run a task once on 5/25/2012; it should run only once;",function(){a.run(function(c){b=c}).on(new TaskDateAdapter.String("5/25/2012"));expect(b).toEqual(1)});it("Run a task once on 5/25/2012 6:00 pm; it should run only once",function(){a.run(function(c){b=c}).on(TaskDateAdapter.String("5/25/2012 6pm"),true);expect(b).toEqual(1)});it("Run a task once on 5/25/2012 6:00 pm; it should not run; TemVar should be 0",function(){a.run(function(c){b=c}).on(TaskDateAdapter.String("5/25/2012 7pm"),true);expect(b).toEqual(0)});it("Run a test 3 times on 5/25/2012; TempVar should be 6 (1+2+3)",function(){a.run(function(c){b+=c},3).on(TaskDateAdapter.String("5/25/2012"));expect(b).toEqual(6)})})});TaskDateAdapter.String=function(f){this.data={month:null,day:null,year:null,hour:null,minute:null,ampm:null};var h=f.split(" ");var g=h.length;var c;var e;switch(g){case 1:this.mode="dateOnly";break;case 2:this.mode="dateWithTime";break;default:throw ("invalid date format provided: "+mmddyyyy);break}var b=h[0].split("/");this.data.month=parseInt(b[0])-1;this.data.day=parseInt(b[1]);this.data.year=parseInt(b[2]);if(this.mode=="dateWithTime"){e=h[1];c=e.substr(e.length-2);if(c!="am"&&c!="pm"){throw ("please indicate am or pm correctly")}this.data.ampm=c;var d=e.split(":");var a=parseInt(d[0].split(c)[0]);if(a=="12"&&c=="am"){this.data.hour=0}else{if(a=="12"&&c=="pm"){this.data.hour=12}else{if(c=="pm"){this.data.hour=a+12}else{this.data.hour=a}}}if(d.length==2){this.data.minute=parseInt(d[1].split(c)[0])}}return new Date(this.data.year,this.data.month,this.data.day,this.data.hour,this.data.minute,0,0)};